<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<script src="https://lf3-static.bytednsdoc.com/obj/eden-cn/dhozeh7vhpebvog/open-garfish/script/slardar-garfish.js"></script><title data-react-helmet="true">routing problem | Garfish</title><meta data-react-helmet="true" property="og:url" content="https://garfish.top/en/issues/router"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="routing problem | Garfish"><meta data-react-helmet="true" name="description" content="The main application routing is currently only supported in history mode, the basename of the child application routing is based on the main application, please refer to child application basename configuration for details."><meta data-react-helmet="true" property="og:description" content="The main application routing is currently only supported in history mode, the basename of the child application routing is based on the main application, please refer to child application basename configuration for details."><link data-react-helmet="true" rel="shortcut icon" href="https://lf3-static.bytednsdoc.com/obj/eden-cn/dhozeh7vhpebvog/open-garfish/icons/icon.png"><link data-react-helmet="true" rel="canonical" href="https://garfish.top/en/issues/router"><link data-react-helmet="true" rel="alternate" href="https://garfish.top/en/issues/router" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://garfish.top/issues/router" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://garfish.top/issues/router" hreflang="x-default"><link rel="stylesheet" href="/en/assets/css/styles.b7222a82.css">
<link rel="preload" href="/en/assets/js/runtime~main.52ca2c4f.js" as="script">
<link rel="preload" href="/en/assets/js/main.59d2cac6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_3wvD">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/dhozeh7vhpebvog/open-garfish/icons/garfish-icon.png" alt="Garfish" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/dhozeh7vhpebvog/open-garfish/icons/garfish-icon.png" alt="Garfish" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a><a class="navbar__item navbar__link" href="/en/guide/">文档</a><a class="navbar__item navbar__link" href="/en/napi/">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/issues/">常见问题</a><a class="navbar__item navbar__link" href="/en/community/discuss">社区</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English (Auto)</span></span></a><ul class="dropdown__menu"><li><a href="/en/issues/router" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English (Auto)</a></li><li><a href="/issues/router" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文（中国）</a></li></ul></div><a href="https://github.com/bytedance/garfish" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbar__search searchBarContainer_1XII"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_2ySb searchBarLoadingRing_1oQO"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/en/"><img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/dhozeh7vhpebvog/open-garfish/icons/garfish-icon.png" alt="Garfish" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/dhozeh7vhpebvog/open-garfish/icons/garfish-icon.png" alt="Garfish" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/en/guide/">文档</a></li><li class="menu__list-item"><a class="menu__link" href="/en/napi/">API</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/en/issues/">常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/en/community/discuss">社区</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/en/issues/router" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English (Auto)</a></li><li class="menu__list-item"><a href="/issues/router" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">简体中文（中国）</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/bytedance/garfish" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_3jyA"><aside class="docSidebarContainer_3jRz"><div class="sidebar_2j-V"><nav class="menu menu--responsive thin-scrollbar menu_1Xkn menuWithAnnouncementBar_1DU9" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_Vtis" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/en/issues">Sub-application error report</a></li><li class="menu__list-item"><a class="menu__link" href="/en/issues/multipleApp">Multiple Garfish Instances</a></li><li class="menu__list-item"><a class="menu__link" href="/en/issues/oldApp">Old application transformation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/en/issues/router">routing problem</a></li><li class="menu__list-item"><a class="menu__link" href="/en/issues/style">style question</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2Hma"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_1Kc0"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_28SP"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1o9i"><div class="docItemContainer_3nUq"><article><div class="markdown"><header><h1 class="h1Heading_1Ib2">routing problem</h1></header><p>The main application routing is currently only supported in <code>history</code> mode, the <code>basename</code> of the child application routing is based on the main application, please refer to <a href="/en/napi/#basename">child application basename configuration</a> for details.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="why-does-the-main-application-only-support-history-mode"></a>Why does the main application only support history mode?<a class="hash-link" href="#why-does-the-main-application-only-support-history-mode" title="Direct link to heading">#</a></h2><ul><li><p>Garfish currently uses namespaces to avoid routing conflicts between applications.</p></li><li><p>The reason why the main application only supports <code>history</code> mode is that <code>hash</code> routes cannot be used as the base routes for child applications, which may lead to route conflicts between the main application and child applications.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="why-cant-the-root-route-be-used-as-an-activation-condition-for-a-child-application"></a>Why can&#x27;t the root route be used as an activation condition for a child application?<a class="hash-link" href="#why-cant-the-root-route-be-used-as-an-activation-condition-for-a-child-application" title="Direct link to heading">#</a></h2><ul><li><p>Some businesses want to use the root route as the activation condition of the sub-application, for example <code>garfish.bytedance.net</code> triggers the rendering of the sub-application. Since the activation condition of the current sub-application <strong>string is the shortest match principle</strong>, if the sub-application <code>activeWhen: &#x27;/&#x27;</code> indicates that <code>&#x27;/xxx&#x27;</code> will be activated.</p></li><li><p>The reason for the shortest match principle is that we need to determine if a child route of a child application is active, and if it is likely to be a child route of a child application, we may activate that application.</p></li><li><p>The reason for this restriction is that if the activation condition of a child application is <code>/</code>, then <code>/xx</code> of that application may be a child route of another child application, which may cause conflicts with other applications and cause confusion.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="what-is-the-basename-that-the-child-application-render-function-gets-and-what-does-it-do"></a>What is the basename that the child application render function gets and what does it do?<a class="hash-link" href="#what-is-the-basename-that-the-child-application-render-function-gets-and-what-does-it-do" title="Direct link to heading">#</a></h2><p>Why is it recommended that the sub-application take the <code>basename</code> passed through the <code>provider</code> as the <code>basename</code> of the sub-application, some business parties directly add <code>basename</code> to the sub-application by agreement in the actual process to achieve the effect of isolation, but the use of this method may lead to the main application if the change <code>basename</code> may cause the sub-application can not be isolated. basename` may cause the child application can not be changed together to take effect.</p><p>For example</p><ol><li><p>the main application currently visits <code>garfish.bytedance.net</code> to access the site&#x27;s home page, the current <code>basename</code> is <code>/</code>, the sub-application vue, the access path is <code>garfish.bytedance.net/vue</code></p></li><li><p>if the main application wants to change <code>basename</code> to <code>/site</code>, the access path of the main application becomes <code>garfish.bytedance.net/site</code> and the access path of the child vue becomes <code>garfish.bytedance.net/site/vue</code>. 3.</p></li><li><p>So it is recommended that the sub-application use the <code>basename</code> passed in the <code>provider</code> as the base route for its own application, to ensure that the relative path of the sub-application still matches the overall change after the main application changes its route</p></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>In micro front-end scenario, each sub-application may have its own routing scenario. To ensure that the routes between sub-applications do not conflict, the Garfish framework uses the configured <code>basename</code> + <code>sub-application&#x27;s activeWhen</code> matching path as the sub-application&#x27;s base path.</p><ul><li><p>If <code>basename: /demo</code> is configured on Garfish and the active path of the child application is: <code>/vue2</code>, then the child application gets the active path as: <code>/demo/vue2</code></p></li><li><p>If the activation condition of the sub-application is a function, each time a route change occurs, the activation function of the sub-application will be verified by checking that the function returns <code>true</code>, which means that the current activation condition is met and will trigger the activation of the route.</p></li><li><p>Garfish will pass the current path into the activation function to get the longest activation path of the sub-application, and pass <code>basename</code> + <code>longest activation path of the sub-application</code> to the sub-application parameters</p></li><li><p><strong>Sub-applications that have their own routes must use basename as the base path for the sub-application in a micro front-end scenario, without which the sub-application&#x27;s routes may conflict with the main application and other applications</strong>
:::</p></li></ul></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/bytedance/garfish/docs/issues/router.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_1CBY" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_24hC">Last updated on <b><time datetime="2021-07-29T06:08:55.000Z">7/29/2021</time></b> by <b>Arthur</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/en/issues/oldApp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Old application transformation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/en/issues/style"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">style question »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_3J2a thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-does-the-main-application-only-support-history-mode" class="table-of-contents__link">Why does the main application only support history mode?</a></li><li><a href="#why-cant-the-root-route-be-used-as-an-activation-condition-for-a-child-application" class="table-of-contents__link">Why can&#39;t the root route be used as an activation condition for a child application?</a></li><li><a href="#what-is-the-basename-that-the-child-application-render-function-gets-and-what-does-it-do" class="table-of-contents__link">What is the basename that the child application render function gets and what does it do?</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 ByteDance, Inc. Powered By Garfish Team</div></div></div></footer></div>
<script src="/en/assets/js/runtime~main.52ca2c4f.js"></script>
<script src="/en/assets/js/main.59d2cac6.js"></script>
</body>
</html>